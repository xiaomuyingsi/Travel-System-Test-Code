{"remainingRequest":"F:\\Java\\Code\\online-travel-view\\node_modules\\babel-loader\\lib\\index.js!F:\\Java\\Code\\online-travel-view\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!F:\\Java\\Code\\online-travel-view\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\Java\\Code\\online-travel-view\\src\\views\\user\\Bed.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\Java\\Code\\online-travel-view\\src\\views\\user\\Bed.vue","mtime":1744472593081},{"path":"F:\\Java\\Code\\online-travel-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\Java\\Code\\online-travel-view\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"F:\\Java\\Code\\online-travel-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\Java\\Code\\online-travel-view\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KZXhwb3J0IGRlZmF1bHQgewogIHByb3BzOiB7CiAgICByb29tSWQ6IHsKICAgICAgdHlwZTogTnVtYmVyLAogICAgICBkZWZhdWx0OiAnJwogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIHJvb21JZCh2MSwgdjIpIHsKICAgICAgY29uc29sZS5sb2coIuaIv+mXtElE77yaIiwgdjEpOwogICAgICB0aGlzLmZldGNoQmVkcyh2MSk7CiAgICB9CgogIH0sCgogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBkYXRhOiB7fSwKICAgICAgYmVkczogW10sCiAgICAgIGJlZE9wZXJhaW9uOiBmYWxzZSwKICAgICAgLy8g5o6n5Yi25bqK5L2N5paw5aKeL+e8lui+keeahOW8gOWFs+WPmOmHjwogICAgICBpc09wZXJhdGlvbjogZmFsc2UgLy8gZmFsc2U6IOaWsOWinu+8m3RydWXvvJog5L+u5pS5CgogICAgfTsKICB9LAoKICBjcmVhdGVkKCkgewogICAgdGhpcy5mZXRjaEJlZHMoKTsKICB9LAoKICBtZXRob2RzOiB7CiAgICBhc3luYyBkZWxldGVCZWQoYmVkKSB7CiAgICAgIGxldCBpZHMgPSBbYmVkLmlkXTsKICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLiRheGlvcy5wb3N0KGAvaG90ZWxSb29tQmVkL2JhdGNoRGVsZXRlYCwgaWRzKTsKCiAgICAgIGlmIChyZXNwb25zZS5kYXRhLmNvZGUgPT09IDIwMCkgewogICAgICAgIHRoaXMuY2FubmVsKCk7CiAgICAgICAgdGhpcy5mZXRjaEJlZHMoKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgIH0sCgogICAgY3JlYXRlQmVkKCkgewogICAgICB0aGlzLmRhdGEgPSB7fTsKICAgICAgdGhpcy5iZWRPcGVyYWlvbiA9IHRydWU7CiAgICB9LAoKICAgIHVwZGF0ZUJlZEluZm8oYmVkKSB7CiAgICAgIHRoaXMuZGF0YSA9IGJlZDsKICAgICAgdGhpcy5iZWRPcGVyYWlvbiA9IHRydWU7CiAgICAgIHRoaXMuaXNPcGVyYXRpb24gPSB0cnVlOwogICAgfSwKCiAgICAvLyDluorkvY3mlrDlop4KICAgIGFkZE9wZXJhdGlvbigpIHsKICAgICAgY29uc3QgaG90ZWxSb29tQmVkID0gewogICAgICAgIHJvb21JZDogdGhpcy5yb29tSWQsCiAgICAgICAgLi4udGhpcy5kYXRhCiAgICAgIH07CiAgICAgIHRoaXMuJGF4aW9zLnBvc3QoJy9ob3RlbFJvb21CZWQvc2F2ZScsIGhvdGVsUm9vbUJlZCkudGhlbihyZXMgPT4gewogICAgICAgIGlmIChyZXMuZGF0YS5jb2RlID09PSAyMDApIHsKICAgICAgICAgIC8vIOWFs+mXreaTjeS9nOWMuuWfnwogICAgICAgICAgdGhpcy5iZWRPcGVyYWlvbiA9IGZhbHNlOwogICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfluorkvY3mlrDlop7miJDlip8nKTsKICAgICAgICAgIHRoaXMuZmV0Y2hCZWRzKCk7CiAgICAgICAgfQogICAgICB9KS5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgY29uc29sZS5lcnJvcigi5p+l6K+i5bqK5L2N5L+h5oGv5byC5bi4OiIsIGVycm9yKTsKICAgICAgfSk7CiAgICB9LAoKICAgIC8vIOW6iuS9jeS/ruaUuQogICAgdXBkYXRlT3BlcmF0aW9uKCkgewogICAgICB0aGlzLiRheGlvcy5wdXQoJy9ob3RlbFJvb21CZWQvdXBkYXRlJywgdGhpcy5kYXRhKS50aGVuKHJlcyA9PiB7CiAgICAgICAgaWYgKHJlcy5kYXRhLmNvZGUgPT09IDIwMCkgewogICAgICAgICAgLy8g5YWz6Zet5pON5L2c5Yy65Z+fCiAgICAgICAgICB0aGlzLmJlZE9wZXJhaW9uID0gZmFsc2U7CiAgICAgICAgICB0aGlzLmlzT3BlcmF0aW9uID0gZmFsc2U7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+W6iuS9jeS/ruaUueaIkOWKnycpOwogICAgICAgICAgdGhpcy5mZXRjaEJlZHMoKTsKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGVycm9yID0+IHsKICAgICAgICBjb25zb2xlLmVycm9yKCLmn6Xor6LluorkvY3kv6Hmga/lvILluLg6IiwgZXJyb3IpOwogICAgICB9KTsKICAgIH0sCgogICAgLy8g5Y+W5raI5LqL5Lu2CiAgICBjYW5uZWwoKSB7CiAgICAgIHRoaXMuZGF0YSA9IHt9OwogICAgICB0aGlzLmJlZE9wZXJhaW9uID0gZmFsc2U7CiAgICAgIHRoaXMuaXNPcGVyYXRpb24gPSBmYWxzZTsKICAgIH0sCgogICAgLy8g5Yqg6L295a+55bqU55qE5bqK5L2N5L+h5oGvCiAgICBmZXRjaEJlZHMoKSB7CiAgICAgIGNvbnN0IGhvdGVsUm9vbUJlZFF1ZXJ5RHRvID0gewogICAgICAgIHJvb21JZDogdGhpcy5yb29tSWQKICAgICAgfTsKICAgICAgdGhpcy4kYXhpb3MucG9zdCgnL2hvdGVsUm9vbUJlZC9xdWVyeScsIGhvdGVsUm9vbUJlZFF1ZXJ5RHRvKS50aGVuKHJlcyA9PiB7CiAgICAgICAgaWYgKHJlcy5kYXRhLmNvZGUgPT09IDIwMCkgewogICAgICAgICAgdGhpcy5iZWRzID0gcmVzLmRhdGEuZGF0YTsKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGVycm9yID0+IHsKICAgICAgICBjb25zb2xlLmVycm9yKCLmn6Xor6LluorkvY3kv6Hmga/lvILluLg6IiwgZXJyb3IpOwogICAgICB9KTsKICAgIH0KCiAgfQp9Ow=="},{"version":3,"sources":["Bed.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div>\r\n    <div v-if=\"bedOperaion\" style=\"padding: 20px;\">\r\n      <div>\r\n        <span class=\"dialog-hover\">床位号</span>\r\n        <input class=\"dialog-input\" v-model=\"data.number\" placeholder=\"输入\" />\r\n        <el-row style=\"margin: 20px 0;\">\r\n          <div>\r\n            <span class=\"dialog-hover\">床位状态</span>\r\n          </div>\r\n          <el-switch active-color=\"#13ce66\" inactive-color=\"#ff4949\" v-model=\"data.status\" active-text=\"可用\"\r\n                     inactive-text=\"不可用\">\r\n          </el-switch>\r\n        </el-row>\r\n      </div>\r\n      <div style=\"display: flex;justify-content: center;align-items: center;\">\r\n        <el-button size=\"small\" v-if=\"!isOperation\"\r\n                   style=\"background-color: rgb(96, 98, 102);color: rgb(247,248,249);border: none;\" class=\"customer\"\r\n                   type=\"info\" @click=\"addOperation()\">新增</el-button>\r\n        <el-button size=\"small\" v-else\r\n                   style=\"background-color: rgb(96, 98, 102);color: rgb(247,248,249);border: none;\" class=\"customer\"\r\n                   type=\"info\" @click=\"updateOperation()\">修改</el-button>\r\n      </div>\r\n    </div>\r\n    <div style=\"display: flex;justify-content: center;align-items: center;margin: 10px;\">\r\n      <el-button style=\"width: 100%;\" v-if=\"beds.length !== 0\" size=\"mini\" type=\"info\"\r\n                 @click=\"createBed\">创建床位信息</el-button>\r\n    </div>\r\n\r\n    <div v-if=\"beds.length === 0\">\r\n      <el-empty>\r\n        <el-button type=\"info\" @click=\"createBed\">创建床位信息</el-button>\r\n      </el-empty>\r\n    </div>\r\n    <div v-else style=\"padding: 10px;\">\r\n      <div class=\"bed-item\" v-for=\"(bed, index) in beds\" :key=\"index\">\r\n        <div style=\"font-size: 18px;\">\r\n                    <span style=\"margin-right: 5px;\">\r\n                        <i class=\"el-icon-table-lamp\"></i>\r\n                        床位号：{{ bed.number }}\r\n                    </span>\r\n          <span>{{ bed.status ? '状态可用' : '状态不可用' }}</span>\r\n        </div>\r\n        <div style=\"margin: 8px 6px;font-size: 12px;\">\r\n          创建时间：{{ bed.createTime }}\r\n        </div>\r\n        <div>\r\n          <el-button style=\"margin-right: 10px;\" @click=\"updateBedInfo(bed)\" size=\"mini\" type=\"primary\"\r\n                     icon=\"el-icon-edit\" circle></el-button>\r\n          <el-popconfirm title=\"确定删除床位信息？\" @confirm=\"deleteBed(bed)\">\r\n            <el-button slot=\"reference\" size=\"mini\" type=\"danger\" icon=\"el-icon-delete\" circle></el-button>\r\n          </el-popconfirm>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  props: {\r\n    roomId: {\r\n      type: Number,\r\n      default: ''\r\n    },\r\n  },\r\n  watch: {\r\n    roomId(v1, v2) {\r\n      console.log(\"房间ID：\" ,v1);\r\n      this.fetchBeds(v1);\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      data: {},\r\n      beds: [],\r\n      bedOperaion: false, // 控制床位新增/编辑的开关变量\r\n      isOperation: false, // false: 新增；true： 修改\r\n    }\r\n  },\r\n  created() {\r\n    this.fetchBeds();\r\n  },\r\n  methods: {\r\n    async deleteBed(bed) {\r\n      let ids = [bed.id]\r\n      const response = await this.$axios.post(`/hotelRoomBed/batchDelete`, ids);\r\n      if (response.data.code === 200) {\r\n        this.cannel();\r\n        this.fetchBeds();\r\n        return;\r\n      }\r\n    },\r\n    createBed() {\r\n      this.data = {};\r\n      this.bedOperaion = true;\r\n    },\r\n    updateBedInfo(bed) {\r\n      this.data = bed;\r\n      this.bedOperaion = true;\r\n      this.isOperation = true;\r\n    },\r\n    // 床位新增\r\n    addOperation() {\r\n      const hotelRoomBed = {\r\n        roomId: this.roomId,\r\n        ...this.data\r\n      }\r\n      this.$axios.post('/hotelRoomBed/save', hotelRoomBed).then(res => {\r\n        if (res.data.code === 200) {\r\n          // 关闭操作区域\r\n          this.bedOperaion = false;\r\n          this.$message.success('床位新增成功');\r\n          this.fetchBeds();\r\n        }\r\n      }).catch(error => {\r\n        console.error(\"查询床位信息异常:\", error);\r\n\r\n      })\r\n    },\r\n    // 床位修改\r\n    updateOperation() {\r\n      this.$axios.put('/hotelRoomBed/update', this.data).then(res => {\r\n        if (res.data.code === 200) {\r\n          // 关闭操作区域\r\n          this.bedOperaion = false;\r\n          this.isOperation = false;\r\n          this.$message.success('床位修改成功');\r\n          this.fetchBeds();\r\n        }\r\n      }).catch(error => {\r\n        console.error(\"查询床位信息异常:\", error);\r\n\r\n      })\r\n    },\r\n    // 取消事件\r\n    cannel() {\r\n      this.data = {};\r\n      this.bedOperaion = false;\r\n      this.isOperation = false;\r\n    },\r\n    // 加载对应的床位信息\r\n    fetchBeds() {\r\n      const hotelRoomBedQueryDto = {\r\n        roomId: this.roomId\r\n      }\r\n      this.$axios.post('/hotelRoomBed/query', hotelRoomBedQueryDto).then(res => {\r\n        if (res.data.code === 200) {\r\n          this.beds = res.data.data;\r\n        }\r\n      }).catch(error => {\r\n        console.error(\"查询床位信息异常:\", error);\r\n\r\n      })\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style scoped lang=\"scss\">\r\n.bed-item {\r\n  background-color: rgb(248, 248, 248);\r\n  padding: 10px;\r\n  border-radius: 5px;\r\n  margin-bottom: 4px;\r\n}\r\n</style>"],"sourceRoot":"src/views/user"}]}