{"remainingRequest":"F:\\Java\\Code\\online-travel-view\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\Java\\Code\\online-travel-view\\src\\views\\admin\\HotelRoomBedManage.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\Java\\Code\\online-travel-view\\src\\views\\admin\\HotelRoomBedManage.vue","mtime":1744192383243},{"path":"F:\\Java\\Code\\online-travel-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\Java\\Code\\online-travel-view\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"F:\\Java\\Code\\online-travel-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\Java\\Code\\online-travel-view\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogIHByb3BzOiB7DQogICAgcm9vbUlkOiB7DQogICAgICB0eXBlOiBOdW1iZXIsDQogICAgICBkZWZhdWx0OiBudWxsDQogICAgfSwNCiAgfSwNCiAgd2F0Y2g6IHsNCiAgICByb29tSWQ6DQogICAgICAgIHsNCiAgICAgICAgICBoYW5kbGVyKHYxLCB2Mikgew0KICAgICAgICAgICAgdGhpcy5yb29tSWQgPSB2MTsNCiAgICAgICAgICAgIHRoaXMuZmV0Y2hCZWRzKCk7DQogICAgICAgICAgfSwNCiAgICAgICAgICBkZWVwOiB0cnVlLC8vIOa3seW6puebkeWQrA0KICAgICAgICAgIGltbWVkaWF0ZTogdHJ1ZSAvL+WmguaenOmcgOimgeWcqOWIneWni+WMluaXtuinpuWPkeebkeWQrO+8jOWPr+S7peiuvue9ruS4uiB0cnVlDQogICAgICAgIH0NCiAgfSwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgZGF0YToge30sDQogICAgICBiZWRzOiBbXSwNCiAgICAgIGJlZE9wZXJhaW9uOiBmYWxzZSwgLy8g5o6n5Yi25bqK5L2N5paw5aKeL+e8lui+keeahOW8gOWFs+WPmOmHjw0KICAgICAgaXNPcGVyYXRpb246IGZhbHNlLCAvLyBmYWxzZTog5paw5aKe77ybdHJ1Ze+8miDkv67mlLkNCiAgICB9DQogIH0sDQogIGNyZWF0ZWQoKSB7DQogICAgdGhpcy5mZXRjaEJlZHMoKTsNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIGFzeW5jIGRlbGV0ZUJlZChiZWQpIHsNCiAgICAgIGxldCBpZHMgPSBbYmVkLmlkXQ0KICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLiRheGlvcy5wb3N0KGAvaG90ZWxSb29tQmVkL2JhdGNoRGVsZXRlYCwgaWRzKTsNCiAgICAgIGlmIChyZXNwb25zZS5kYXRhLmNvZGUgPT09IDIwMCkgew0KICAgICAgICB0aGlzLmNhbm5lbCgpOw0KICAgICAgICB0aGlzLmZldGNoQmVkcygpOw0KICAgICAgICByZXR1cm47DQogICAgICB9DQogICAgfSwNCiAgICBjcmVhdGVCZWQoKSB7DQogICAgICB0aGlzLmRhdGEgPSB7fTsNCiAgICAgIHRoaXMuYmVkT3BlcmFpb24gPSB0cnVlOw0KICAgIH0sDQogICAgdXBkYXRlQmVkSW5mbyhiZWQpIHsNCiAgICAgIHRoaXMuZGF0YSA9IGJlZDsNCiAgICAgIHRoaXMuYmVkT3BlcmFpb24gPSB0cnVlOw0KICAgICAgdGhpcy5pc09wZXJhdGlvbiA9IHRydWU7DQogICAgfSwNCiAgICAvLyDluorkvY3mlrDlop4NCiAgICBhZGRPcGVyYXRpb24oKSB7DQogICAgICBjb25zdCBob3RlbFJvb21CZWQgPSB7DQogICAgICAgIHJvb21JZDogdGhpcy5yb29tSWQsDQogICAgICAgIC4uLnRoaXMuZGF0YQ0KICAgICAgfQ0KICAgICAgdGhpcy4kYXhpb3MucG9zdCgnL2hvdGVsUm9vbUJlZC9zYXZlJywgaG90ZWxSb29tQmVkKS50aGVuKHJlcyA9PiB7DQogICAgICAgIGlmIChyZXMuZGF0YS5jb2RlID09PSAyMDApIHsNCiAgICAgICAgICAvLyDlhbPpl63mk43kvZzljLrln58NCiAgICAgICAgICB0aGlzLmJlZE9wZXJhaW9uID0gZmFsc2U7DQogICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfluorkvY3mlrDlop7miJDlip8nKTsNCiAgICAgICAgICB0aGlzLmZldGNoQmVkcygpOw0KICAgICAgICB9DQogICAgICB9KS5jYXRjaChlcnJvciA9PiB7DQogICAgICAgIGNvbnNvbGUuZXJyb3IoIuafpeivouW6iuS9jeS/oeaBr+W8guW4uDoiLCBlcnJvcik7DQoNCiAgICAgIH0pDQogICAgfSwNCiAgICAvLyDluorkvY3kv67mlLkNCiAgICB1cGRhdGVPcGVyYXRpb24oKSB7DQogICAgICB0aGlzLiRheGlvcy5wdXQoJy9ob3RlbFJvb21CZWQvdXBkYXRlJywgdGhpcy5kYXRhKS50aGVuKHJlcyA9PiB7DQogICAgICAgIGlmIChyZXMuZGF0YS5jb2RlID09PSAyMDApIHsNCiAgICAgICAgICAvLyDlhbPpl63mk43kvZzljLrln58NCiAgICAgICAgICB0aGlzLmJlZE9wZXJhaW9uID0gZmFsc2U7DQogICAgICAgICAgdGhpcy5pc09wZXJhdGlvbiA9IGZhbHNlOw0KICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5bqK5L2N5L+u5pS55oiQ5YqfJyk7DQogICAgICAgICAgdGhpcy5mZXRjaEJlZHMoKTsNCiAgICAgICAgfQ0KICAgICAgfSkuY2F0Y2goZXJyb3IgPT4gew0KICAgICAgICBjb25zb2xlLmVycm9yKCLmn6Xor6LluorkvY3kv6Hmga/lvILluLg6IiwgZXJyb3IpOw0KDQogICAgICB9KQ0KICAgIH0sDQogICAgLy8g5Y+W5raI5LqL5Lu2DQogICAgY2FubmVsKCkgew0KICAgICAgdGhpcy5kYXRhID0ge307DQogICAgICB0aGlzLmJlZE9wZXJhaW9uID0gZmFsc2U7DQogICAgICB0aGlzLmlzT3BlcmF0aW9uID0gZmFsc2U7DQogICAgfSwNCiAgICAvLyDliqDovb3lr7nlupTnmoTluorkvY3kv6Hmga8NCiAgICBmZXRjaEJlZHMoKSB7DQogICAgICBjb25zdCBob3RlbFJvb21CZWRRdWVyeUR0byA9IHsNCiAgICAgICAgcm9vbUlkOiB0aGlzLnJvb21JZA0KICAgICAgfQ0KICAgICAgdGhpcy4kYXhpb3MucG9zdCgnL2hvdGVsUm9vbUJlZC9xdWVyeScsIGhvdGVsUm9vbUJlZFF1ZXJ5RHRvKS50aGVuKHJlcyA9PiB7DQogICAgICAgIGlmIChyZXMuZGF0YS5jb2RlID09PSAyMDApIHsNCiAgICAgICAgICB0aGlzLmJlZHMgPSByZXMuZGF0YS5kYXRhOw0KICAgICAgICB9DQogICAgICB9KS5jYXRjaChlcnJvciA9PiB7DQogICAgICAgIGNvbnNvbGUuZXJyb3IoIuafpeivouW6iuS9jeS/oeaBr+W8guW4uDoiLCBlcnJvcik7DQoNCiAgICAgIH0pDQogICAgfSwNCiAgfSwNCn07DQo="},{"version":3,"sources":["HotelRoomBedManage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"HotelRoomBedManage.vue","sourceRoot":"src/views/admin","sourcesContent":["<template>\r\n  <div>\r\n    <div v-if=\"bedOperaion\" style=\"padding: 20px;\">\r\n      <div>\r\n        <span class=\"dialog-hover\">床位号</span>\r\n        <input class=\"dialog-input\" v-model=\"data.number\" placeholder=\"输入\"/>\r\n        <el-row style=\"margin: 20px 0;\">\r\n          <div>\r\n            <span class=\"dialog-hover\">床位状态</span>\r\n          </div>\r\n          <el-switch active-color=\"#13ce66\" inactive-color=\"#ff4949\" v-model=\"data.status\" active-text=\"可用\"\r\n                     inactive-text=\"不可用\">\r\n          </el-switch>\r\n        </el-row>\r\n      </div>\r\n      <div style=\"display: flex;justify-content: center;align-items: center;\">\r\n        <el-button size=\"small\" v-if=\"!isOperation\"\r\n                   style=\"background-color: rgb(96, 98, 102);color: rgb(247,248,249);border: none;\" class=\"customer\"\r\n                   type=\"info\" @click=\"addOperation()\">新增\r\n        </el-button>\r\n        <el-button size=\"small\" v-else\r\n                   style=\"background-color: rgb(96, 98, 102);color: rgb(247,248,249);border: none;\" class=\"customer\"\r\n                   type=\"info\" @click=\"updateOperation()\">修改\r\n        </el-button>\r\n      </div>\r\n    </div>\r\n    <div style=\"display: flex;justify-content: center;align-items: center;margin: 10px;\">\r\n      <el-button style=\"width: 100%;\" v-if=\"beds.length !== 0\" size=\"mini\" type=\"info\"\r\n                 @click=\"createBed\">创建床位信息\r\n      </el-button>\r\n    </div>\r\n\r\n    <div v-if=\"beds.length === 0\">\r\n      <el-empty>\r\n        <el-button type=\"info\" @click=\"createBed\">创建床位信息</el-button>\r\n      </el-empty>\r\n    </div>\r\n    <div v-else style=\"padding: 10px;\">\r\n      <div class=\"bed-item\" v-for=\"(bed, index) in beds\" :key=\"index\">\r\n        <div style=\"font-size: 18px;\">\r\n                    <span style=\"margin-right: 5px;\">\r\n                        <i class=\"el-icon-table-lamp\"></i>\r\n                        床位号：{{ bed.number }}\r\n                    </span>\r\n          <span>{{ bed.status ? '状态可用' : '状态不可用' }}</span>\r\n        </div>\r\n        <div style=\"margin: 8px 6px;font-size: 12px;\">\r\n          创建时间：{{ bed.createTime }}\r\n        </div>\r\n        <div>\r\n          <el-button style=\"margin-right: 10px;\" @click=\"updateBedInfo(bed)\" size=\"mini\" type=\"primary\"\r\n                     icon=\"el-icon-edit\" circle></el-button>\r\n          <el-popconfirm title=\"确定删除床位信息？\" @confirm=\"deleteBed(bed)\">\r\n            <el-button slot=\"reference\" size=\"mini\" type=\"danger\" icon=\"el-icon-delete\" circle></el-button>\r\n          </el-popconfirm>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  props: {\r\n    roomId: {\r\n      type: Number,\r\n      default: null\r\n    },\r\n  },\r\n  watch: {\r\n    roomId:\r\n        {\r\n          handler(v1, v2) {\r\n            this.roomId = v1;\r\n            this.fetchBeds();\r\n          },\r\n          deep: true,// 深度监听\r\n          immediate: true //如果需要在初始化时触发监听，可以设置为 true\r\n        }\r\n  },\r\n  data() {\r\n    return {\r\n      data: {},\r\n      beds: [],\r\n      bedOperaion: false, // 控制床位新增/编辑的开关变量\r\n      isOperation: false, // false: 新增；true： 修改\r\n    }\r\n  },\r\n  created() {\r\n    this.fetchBeds();\r\n  },\r\n  methods: {\r\n    async deleteBed(bed) {\r\n      let ids = [bed.id]\r\n      const response = await this.$axios.post(`/hotelRoomBed/batchDelete`, ids);\r\n      if (response.data.code === 200) {\r\n        this.cannel();\r\n        this.fetchBeds();\r\n        return;\r\n      }\r\n    },\r\n    createBed() {\r\n      this.data = {};\r\n      this.bedOperaion = true;\r\n    },\r\n    updateBedInfo(bed) {\r\n      this.data = bed;\r\n      this.bedOperaion = true;\r\n      this.isOperation = true;\r\n    },\r\n    // 床位新增\r\n    addOperation() {\r\n      const hotelRoomBed = {\r\n        roomId: this.roomId,\r\n        ...this.data\r\n      }\r\n      this.$axios.post('/hotelRoomBed/save', hotelRoomBed).then(res => {\r\n        if (res.data.code === 200) {\r\n          // 关闭操作区域\r\n          this.bedOperaion = false;\r\n          this.$message.success('床位新增成功');\r\n          this.fetchBeds();\r\n        }\r\n      }).catch(error => {\r\n        console.error(\"查询床位信息异常:\", error);\r\n\r\n      })\r\n    },\r\n    // 床位修改\r\n    updateOperation() {\r\n      this.$axios.put('/hotelRoomBed/update', this.data).then(res => {\r\n        if (res.data.code === 200) {\r\n          // 关闭操作区域\r\n          this.bedOperaion = false;\r\n          this.isOperation = false;\r\n          this.$message.success('床位修改成功');\r\n          this.fetchBeds();\r\n        }\r\n      }).catch(error => {\r\n        console.error(\"查询床位信息异常:\", error);\r\n\r\n      })\r\n    },\r\n    // 取消事件\r\n    cannel() {\r\n      this.data = {};\r\n      this.bedOperaion = false;\r\n      this.isOperation = false;\r\n    },\r\n    // 加载对应的床位信息\r\n    fetchBeds() {\r\n      const hotelRoomBedQueryDto = {\r\n        roomId: this.roomId\r\n      }\r\n      this.$axios.post('/hotelRoomBed/query', hotelRoomBedQueryDto).then(res => {\r\n        if (res.data.code === 200) {\r\n          this.beds = res.data.data;\r\n        }\r\n      }).catch(error => {\r\n        console.error(\"查询床位信息异常:\", error);\r\n\r\n      })\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style scoped lang=\"scss\">\r\n.bed-item {\r\n  background-color: rgb(248, 248, 248);\r\n  padding: 10px;\r\n  border-radius: 5px;\r\n  margin-bottom: 4px;\r\n}\r\n</style>"]}]}