{"remainingRequest":"F:\\Java\\Code\\online-travel-view\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\Java\\Code\\online-travel-view\\src\\views\\user\\Main.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\Java\\Code\\online-travel-view\\src\\views\\user\\Main.vue","mtime":1744600062200},{"path":"F:\\Java\\Code\\online-travel-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\Java\\Code\\online-travel-view\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"F:\\Java\\Code\\online-travel-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\Java\\Code\\online-travel-view\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBMb2dvIGZyb20gIkAvY29tcG9uZW50cy9Mb2dvIjsKaW1wb3J0IEFpSGVscGVyIGZyb20gJ0Avdmlld3MvdXNlci9BaUhlbHBlci52dWUnOwoKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIExvZ28sCiAgICBBaUhlbHBlcgogIH0sCiAgbmFtZTogIlVzZXIiLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBrZXk6ICcnLAogICAgICBkZWZhdWx0UGF0aDogJy9zY2VuaWMnLAogICAgICB1c2VySW5mbzoge30sCiAgICAgIHNob3dBaUhlbHBlcjogZmFsc2UgLy8g6buY6K6k5LiN5pi+56S6IEFJIOWKqeaJiwogICAgfTsKICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmF1dGgoKTsKICAgIHRoaXMucm91dGUodGhpcy5kZWZhdWx0UGF0aCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICByb3V0ZShwYXRoKSB7CiAgICAgIHRoaXMuc2hvd0FpSGVscGVyID0gZmFsc2U7IC8vIOWIh+aNoumhtemdouaXtuWFs+mXrSBBSSDliqnmiYsKICAgICAgaWYgKHRoaXMuJHJvdXRlLnBhdGggIT09IHBhdGgpIHsKICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaChwYXRoKTsKICAgICAgfQogICAgfSwKICAgIHRvZ2dsZUFpSGVscGVyKCkgewogICAgICB0aGlzLnNob3dBaUhlbHBlciA9ICF0aGlzLnNob3dBaUhlbHBlcjsKICAgICAgaWYgKHRoaXMuc2hvd0FpSGVscGVyKSB7CiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy91c2VyL2FpSGVscGVyJyk7ICAvLyDlvZPngrnlh7sgQUkg5Yqp5omL5pe25pS55Y+YIFVSTAogICAgICB9CiAgICB9LAogICAgY2xvc2VBaUhlbHBlcigpIHsKICAgICAgdGhpcy5zaG93QWlIZWxwZXIgPSBmYWxzZTsKICAgIH0sCiAgICBhc3luYyBsb2dpbk91dCgpIHsKICAgICAgY29uc3QgY29uZmlybWVkID0gYXdhaXQgdGhpcy4kc3dhbENvbmZpcm0oewogICAgICAgIHRpdGxlOiAn6YCA5Ye655m75b2VJywKICAgICAgICB0ZXh0OiBg6YCA5Ye65ZCO6ZyA6KaB6YeN5paw55m75b2V5ZOm77yfYCwKICAgICAgICBpY29uOiAnd2FybmluZycsCiAgICAgIH0pOwogICAgICBpZiAoY29uZmlybWVkKSB7CiAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgndG9rZW4nLCBudWxsKTsKICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnLycpOwogICAgICB9CiAgICB9LAogICAgYXN5bmMgYXV0aCgpIHsKICAgICAgY29uc3QgeyBkYXRhIH0gPSBhd2FpdCB0aGlzLiRheGlvcy5nZXQoJy91c2VyL2F1dGgnKTsKICAgICAgaWYgKGRhdGEuY29kZSAhPT0gMjAwKSB7CiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy8nKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCd1c2VySW5mbycsSlNPTi5zdHJpbmdpZnkoZGF0YS5kYXRhKSk7CiAgICAgICAgdGhpcy51c2VySW5mbyA9IGRhdGEuZGF0YTsKICAgICAgfQogICAgfQogIH0KfTsK"},{"version":3,"sources":["Main.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Main.vue","sourceRoot":"src/views/user","sourcesContent":["<template>\n  <div>\n    <div class=\"top\">\n      <div class=\"top-left\">\n        <Logo sysName=\"趣旅\" />\n      </div>\n      <div class=\"top-right\">\n        <ul>\n          <li @click=\"route('/scenic')\">景点</li>\n          <li @click=\"route('/strategy')\">攻略区</li>\n          <li @click=\"route('/hotel')\">酒店</li>\n          <li>\n            <el-dropdown type=\"success\" size=\"mini\" :hide-on-click=\"false\">\n              <span class=\"el-dropdown-link\">\n                订单详情<i class=\"el-icon-arrow-down el-icon--right\"></i>\n              </span>\n              <el-dropdown-menu slot=\"dropdown\">\n                <el-dropdown-item @click.native=\"route('/hotelOrder')\">酒店订单</el-dropdown-item>\n                <el-dropdown-item @click.native=\"route('/ticketOrder')\">门票预约</el-dropdown-item>\n              </el-dropdown-menu>\n            </el-dropdown>\n          </li>\n          <li @click=\"route('/notice')\">公告通知</li>\n          <li @click=\"route('/order')\">我的订单</li>\n          <li @click=\"toggleAiHelper\">AI助手</li>\n        </ul>\n\n        <el-dropdown type=\"success\" size=\"mini\" :hide-on-click=\"false\">\n          <span class=\"el-dropdown-link\" style=\"cursor: pointer;\">\n            内容中心<i class=\"el-icon-arrow-down el-icon--right\"></i>\n          </span>\n          <el-dropdown-menu slot=\"dropdown\">\n            <el-dropdown-item @click.native=\"route('/publishStrategy')\">发布攻略</el-dropdown-item>\n            <el-dropdown-item @click.native=\"route('/contentCenter')\">内容中心</el-dropdown-item>\n            <el-dropdown-item @click.native=\"route('/save')\">我的收藏</el-dropdown-item>\n          </el-dropdown-menu>\n        </el-dropdown>\n\n        <el-button type=\"primary\" size=\"mini\" @click=\"route('/service')\" round>服务中心</el-button>\n\n        <el-dropdown type=\"success\" size=\"mini\" class=\"user-dropdown\">\n          <span class=\"el-dropdown-link\" style=\"display: flex; align-items: center; cursor: pointer;\">\n            <el-avatar :size=\"30\" :src=\"userInfo.userAvatar\" style=\"margin-top: 0;\"></el-avatar>\n            <span class=\"user-name\" style=\"margin-left: 5px; font-size: 14px;\">{{ userInfo.userName }}</span>\n            <i class=\"el-icon-arrow-down el-icon--right\" style=\"margin-left: 5px;\"></i>\n          </span>\n          <el-dropdown-menu slot=\"dropdown\">\n            <el-dropdown-item @click.native=\"route('/self')\">个人资料</el-dropdown-item>\n            <el-dropdown-item @click.native=\"route('/resetPwd')\">修改密码</el-dropdown-item>\n            <el-dropdown-item @click.native=\"loginOut\">退出登录</el-dropdown-item>\n          </el-dropdown-menu>\n        </el-dropdown>\n      </div>\n    </div>\n\n    <div class=\"router-view\">\n      <div class=\"item\">\n        <!-- 互斥显示：AI助手 和 页面内容二选一 -->\n        <router-view v-if=\"!showAiHelper\"></router-view>\n        <ai-helper v-else @close=\"closeAiHelper\" />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Logo from \"@/components/Logo\";\nimport AiHelper from '@/views/user/AiHelper.vue';\n\nexport default {\n  components: {\n    Logo,\n    AiHelper\n  },\n  name: \"User\",\n  data() {\n    return {\n      key: '',\n      defaultPath: '/scenic',\n      userInfo: {},\n      showAiHelper: false // 默认不显示 AI 助手\n    };\n  },\n  created() {\n    this.auth();\n    this.route(this.defaultPath);\n  },\n  methods: {\n    route(path) {\n      this.showAiHelper = false; // 切换页面时关闭 AI 助手\n      if (this.$route.path !== path) {\n        this.$router.push(path);\n      }\n    },\n    toggleAiHelper() {\n      this.showAiHelper = !this.showAiHelper;\n      if (this.showAiHelper) {\n        this.$router.push('/user/aiHelper');  // 当点击 AI 助手时改变 URL\n      }\n    },\n    closeAiHelper() {\n      this.showAiHelper = false;\n    },\n    async loginOut() {\n      const confirmed = await this.$swalConfirm({\n        title: '退出登录',\n        text: `退出后需要重新登录哦？`,\n        icon: 'warning',\n      });\n      if (confirmed) {\n        sessionStorage.setItem('token', null);\n        this.$router.push('/');\n      }\n    },\n    async auth() {\n      const { data } = await this.$axios.get('/user/auth');\n      if (data.code !== 200) {\n        this.$router.push('/');\n      } else {\n        sessionStorage.setItem('userInfo',JSON.stringify(data.data));\n        this.userInfo = data.data;\n      }\n    }\n  }\n};\n</script>\n\n<style scoped lang=\"scss\">\n.top {\n  height: 65px;\n  line-height: 65px;\n  padding: 20px 100px;\n  box-sizing: border-box;\n  display: flex;\n  justify-content: space-between;\n  border-bottom: 1px solid rgb(231, 231, 231);\n\n  .top-right {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    gap: 10px;\n\n    ul {\n      list-style: none;\n\n      li {\n        cursor: pointer;\n        float: left;\n        margin-right: 6px;\n        padding: 5px 10px;\n        min-width: 50px;\n        max-width: 100px;\n        color: rgb(111, 53, 71);\n        font-size: 14px;\n        box-sizing: border-box;\n        font-weight: 500;\n      }\n\n      li:hover {\n        color: rgb(128, 144, 100);\n      }\n    }\n  }\n\n  .top-left {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n}\n\n.router-view {\n  padding: 60px 30px;\n  box-sizing: border-box;\n  background-color: rgb(253, 253, 253);\n  min-height: calc(100vh - 66px);\n\n  .item {\n    width: 60%;\n    margin: 0 auto;\n  }\n}\n</style>\n"]}]}