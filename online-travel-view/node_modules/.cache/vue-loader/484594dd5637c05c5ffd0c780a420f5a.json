{"remainingRequest":"F:\\Java\\Code\\online-travel-view\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\Java\\Code\\online-travel-view\\src\\components\\Evaluations.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\Java\\Code\\online-travel-view\\src\\components\\Evaluations.vue","mtime":1744608507822},{"path":"F:\\Java\\Code\\online-travel-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\Java\\Code\\online-travel-view\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"F:\\Java\\Code\\online-travel-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\Java\\Code\\online-travel-view\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQge3RpbWVBZ299IGZyb20gJ0AvdXRpbHMvZGF0YScNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBwcm9wczogew0KICAgIGNvbnRlbnRJZDogew0KICAgICAgdHlwZTogTnVtYmVyLA0KICAgICAgZGVmYXVsdDogJycNCiAgICB9LA0KICAgIGNvbnRlbnRUeXBlOiB7DQogICAgICB0eXBlOiBTdHJpbmcsDQogICAgICBkZWZhdWx0OiAnJw0KICAgIH0NCiAgfSwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgdXNlckRhdGE6IHt9LA0KICAgICAgbm90ZURhdGE6IHt9LA0KICAgICAgY29tbWVudENvbnRlbnQ6ICcnLA0KICAgICAgY29udGVudDogJycsDQogICAgICBjb21tZW50TGlzdDogW10sDQogICAgICByZXBseUNvbnRlbnQ6ICcnLA0KICAgICAgaWQ6IG51bGwsDQogICAgICBpc0ZvY3VzZWQ6IGZhbHNlLA0KICAgICAgYmdDb2xvcjogJ3JnYigyNDUgMjQ1IDI0NSknLA0KICAgICAgc3RyTGVuZ3RoOiAnMC8zMDAnLA0KICAgICAgcmVwbHlUZXh0OiAnJywNCiAgICAgIHVzZXJJZDogJycsDQogICAgICBkaWFsb2dWaXNpYmxlUmVwb3J0OiBmYWxzZSwNCiAgICAgIHJlcG9ydHM6IFtdLA0KICAgICAgc2VsZWN0ZFN0YXR1czogZmFsc2UsDQogICAgICBldmFsdWF0aW9uc0NvdW50OiAwLA0KICAgICAgY29tbWVudDoge30sDQogICAgICByZXBseUNoaWxkQ29udGVudDogJycsDQogICAgfTsNCiAgfSwNCiAgd2F0Y2g6IHsNCiAgICBjb250ZW50SWQobmV3VmFsLCBvbGRWYWwpIHsNCiAgICAgIGlmIChuZXdWYWwgIT09IG9sZFZhbCkgew0KICAgICAgICB0aGlzLmxvYWRDb21tZW50TGlzdCgpOw0KICAgICAgfQ0KICAgIH0sDQogICAgY29udGVudCgpIHsNCiAgICAgIGlmICh0aGlzLmNvbnRlbnQgPT09ICcnKSB7DQogICAgICAgIHRoaXMuaXNGb2N1c2VkID0gZmFsc2U7DQogICAgICAgIHJldHVybjsNCiAgICAgIH0NCiAgICB9LA0KICB9LA0KICBjcmVhdGVkKCkgew0KICAgIHRoaXMuZ2V0VXNlckluZm8oKTsNCiAgICB0aGlzLmxvYWRDb21tZW50TGlzdCgpOw0KICB9LA0KICBtZXRob2RzOiB7DQogICAgZ2V0VXNlckluZm8oKSB7DQogICAgICBjb25zdCB1c2VySW5mbyA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oInVzZXJJbmZvIik7DQogICAgICB0aGlzLnVzZXJEYXRhID0gSlNPTi5wYXJzZSh1c2VySW5mbyk7DQogICAgICB0aGlzLnVzZXJJZCA9IHRoaXMudXNlckRhdGEuaWQ7DQogICAgfSwNCiAgICAvLyDngrnotZ4g5oiWIOWPlua2iOeCuei1ng0KICAgIHVwdm90ZShjb21tZW50KSB7DQogICAgICBsZXQgdXB2b3RlTGlzdCA9IGNvbW1lbnQudXB2b3RlTGlzdCA/IGNvbW1lbnQudXB2b3RlTGlzdC5zcGxpdCgnLCcpIDogW107DQogICAgICBpZiAodXB2b3RlTGlzdC5sZW5ndGgpIHsNCiAgICAgICAgLy8g55WM6Z2i5Y+N5pigDQogICAgICAgIGlmIChjb21tZW50LnVwdm90ZUZsYWcpIHsNCiAgICAgICAgICAvLyDlj5bmtojngrnotZ4NCiAgICAgICAgICBsZXQgaW5kZXggPSB1cHZvdGVMaXN0LmluZGV4T2YodGhpcy51c2VyRGF0YS5pZC50b1N0cmluZygpKTsNCiAgICAgICAgICBpZiAoaW5kZXggIT09IC0xKSB7DQogICAgICAgICAgICB1cHZvdGVMaXN0LnNwbGljZShpbmRleCwgMSk7IC8vIOenu+mZpOeUqOaIt0lEDQogICAgICAgICAgfQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIC8vIOeCuei1ng0KICAgICAgICAgIGlmICghdXB2b3RlTGlzdC5pbmNsdWRlcyh0aGlzLnVzZXJEYXRhLnVzZXJJZC50b1N0cmluZygpKSkgew0KICAgICAgICAgICAgdXB2b3RlTGlzdC5wdXNoKHRoaXMudXNlckRhdGEudXNlcklkLnRvU3RyaW5nKCkpOyAvLyDmt7vliqDnlKjmiLdJRA0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgbGV0IGV2YWx1c3Rpb25zID0gew0KICAgICAgICBpZDogY29tbWVudC5pZCwNCiAgICAgICAgdXB2b3RlTGlzdDogdXB2b3RlTGlzdC5sZW5ndGggPyB1cHZvdGVMaXN0LmpvaW4oJywnKSA6IHRoaXMudXNlckRhdGEuaWQNCiAgICAgIH0NCiAgICAgIHRoaXMuJGF4aW9zLnB1dChgZXZhbHVhdGlvbnMvdXBkYXRlYCwgZXZhbHVzdGlvbnMpLnRoZW4ocmVzID0+IHsNCiAgICAgICAgaWYgKHJlcy5kYXRhLmNvZGUgPT0gMjAwKSB7DQogICAgICAgICAgY29tbWVudC51cHZvdGVMaXN0ID0gdXB2b3RlTGlzdC5qb2luKCcsJyk7IC8vIOabtOaWsHVwdm90ZUxpc3TlrZfnrKbkuLINCiAgICAgICAgICBjb21tZW50LnVwdm90ZUZsYWcgPSAhY29tbWVudC51cHZvdGVGbGFnOyAvLyDliIfmjaLngrnotZ7nirbmgIHmoIflv5cNCiAgICAgICAgICBjb21tZW50LnVwdm90ZUNvdW50ICs9IDE7DQogICAgICAgIH0NCiAgICAgIH0pLmNhdGNoKGVyciA9PiB7DQogICAgICAgIGNvbnNvbGUuZXJyb3IoYOeCuei1nueKtuaAgeiuvue9ruW8guW4uCAtPiBgLCBlcnIpOw0KICAgICAgfSkNCiAgICB9LA0KICAgIC8vIOehruWumuS4vuaKpQ0KICAgIG9wZXJhdGlvblJlcG9ydCgpIHsNCiAgICAgIGxldCByZXBvcnRJdGVtID0gW107DQogICAgICB0aGlzLnJlcG9ydHMuZm9yRWFjaChlbnRpdHkgPT4gew0KICAgICAgICBsZXQgZW50aXR5UmVwb3J0ID0gZW50aXR5Lmxpc3QuZmlsdGVyKGNoaWxkID0+IGNoaWxkLmlzU2VsZWN0ZWQpOw0KICAgICAgICBpZiAoZW50aXR5UmVwb3J0Lmxlbmd0aCAhPSAwKSB7DQogICAgICAgICAgcmVwb3J0SXRlbSA9IGVudGl0eVJlcG9ydDsNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgICBpZiAoIXJlcG9ydEl0ZW0ubGVuZ3RoKSB7DQogICAgICAgIHRoaXMuJG1lc3NhZ2UoYOivt+mAieS4reS4vuaKpemhuWApOw0KICAgICAgICByZXR1cm47DQogICAgICB9DQogICAgICB0aGlzLiRheGlvcy5nZXQoYGV2YWx1YXRpb25zLXJlcG9ydHMvcmVwb3J0LyR7dGhpcy5jb21tZW50LmlkfS8ke3JlcG9ydEl0ZW1bMF0ubmFtZX1gKS50aGVuKHJlcyA9PiB7DQogICAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZVJlcG9ydCA9IGZhbHNlOw0KICAgICAgICBpZiAocmVzLmRhdGEuY29kZSA9PSAyMDApIHsNCiAgICAgICAgICB0aGlzLiRzd2FsLmZpcmUoew0KICAgICAgICAgICAgdGl0bGU6ICfkuL7miqXmk43kvZwnLA0KICAgICAgICAgICAgdGV4dDogJ+S4vuaKpeaIkOWKnycsDQogICAgICAgICAgICBpY29uOiAnc3VjY2VzcycsDQogICAgICAgICAgICBzaG93Q29uZmlybUJ1dHRvbjogZmFsc2UsDQogICAgICAgICAgICB0aW1lcjogMTEwMA0KICAgICAgICAgIH0pOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHRoaXMuJHN3YWwuZmlyZSh7DQogICAgICAgICAgICB0aXRsZTogJ+S4vuaKpeaTjeS9nCcsDQogICAgICAgICAgICB0ZXh0OiByZXMuZGF0YS5tc2csDQogICAgICAgICAgICBpY29uOiAnZXJyb3InLA0KICAgICAgICAgICAgc2hvd0NvbmZpcm1CdXR0b246IGZhbHNlLA0KICAgICAgICAgICAgdGltZXI6IDExMDANCiAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KICAgICAgfSkuY2F0Y2goZXJyID0+IHsNCiAgICAgICAgY29uc29sZS5lcnJvcihg6K+E6K665Li+5oql5byC5bi4IC0+IGAsIGVycik7DQogICAgICB9KQ0KICAgIH0sDQogICAgLy8g6YCJ5Lit5Li+5oql6aG5DQogICAgcmVwb3J0SXRlbUNsaWNrKGl0ZW1DaGlsZCkgew0KICAgICAgdGhpcy5yZXBvcnRzLmZvckVhY2goZW50aXR5ID0+IHsNCiAgICAgICAgZW50aXR5Lmxpc3QuZm9yRWFjaChjaGlsZCA9PiB7DQogICAgICAgICAgY2hpbGQuaXNTZWxlY3RlZCA9IGZhbHNlOw0KICAgICAgICB9KQ0KICAgICAgfSkNCiAgICAgIGl0ZW1DaGlsZC5pc1NlbGVjdGVkID0gdHJ1ZTsNCiAgICB9LA0KICAgIHJlcG9ydExpc3QoKSB7DQogICAgICB0aGlzLiRheGlvcy5nZXQoYGV2YWx1YXRpb25zL3JlcG9ydExpc3RgKS50aGVuKHJlcyA9PiB7DQogICAgICAgIGlmIChyZXMuZGF0YS5jb2RlID09IDIwMCkgew0KICAgICAgICAgIHRoaXMucmVwb3J0cyA9IFtdOw0KICAgICAgICAgIHJlcy5kYXRhLmRhdGEuZm9yRWFjaChlbnRpdHkgPT4gew0KICAgICAgICAgICAgbGV0IHJlcG9ydCA9IHtuYW1lOiBlbnRpdHkubmFtZX07DQogICAgICAgICAgICBsZXQgcmVzcG9ydExpc3QgPSBbXTsNCiAgICAgICAgICAgIGVudGl0eS5saXN0LmZvckVhY2gobGlzdEl0ZW0gPT4gew0KICAgICAgICAgICAgICBsZXQgcmVwb3J0Q2hpbGQgPSB7fTsNCiAgICAgICAgICAgICAgcmVwb3J0Q2hpbGQubmFtZSA9IGxpc3RJdGVtOw0KICAgICAgICAgICAgICByZXBvcnRDaGlsZC5pc1NlbGVjdGVkID0gZmFsc2U7DQogICAgICAgICAgICAgIHJlc3BvcnRMaXN0LnB1c2gocmVwb3J0Q2hpbGQpOw0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIHJlcG9ydC5saXN0ID0gcmVzcG9ydExpc3Q7DQogICAgICAgICAgICB0aGlzLnJlcG9ydHMucHVzaChyZXBvcnQpOw0KICAgICAgICAgIH0pDQogICAgICAgIH0NCiAgICAgIH0pLmNhdGNoKGVyciA9PiB7DQogICAgICAgIGNvbnNvbGUuZXJyb3IoYOS4vuaKpemhueWKoOi9veWksei0pSAtPiBgLCBlcnIpOw0KICAgICAgfSkNCiAgICB9LA0KICAgIHJlcG9ydENvbW1lbnQoY29tbWVudCkgew0KICAgICAgdGhpcy5yZXBvcnRMaXN0KCk7DQogICAgICB0aGlzLmRpYWxvZ1Zpc2libGVSZXBvcnQgPSB0cnVlOw0KICAgICAgdGhpcy5jb21tZW50ID0gY29tbWVudDsNCiAgICB9LA0KICAgIGRlbGV0ZUNvbW1lbnQoY29tbWVudCkgeyAvLyDliKDpmaTor4TorroNCiAgICAgIHRoaXMuJGF4aW9zLmRlbGV0ZShgZXZhbHVhdGlvbnMvZGVsZXRlLyR7Y29tbWVudC5pZH1gKS50aGVuKHJlcyA9PiB7DQogICAgICAgIGlmIChyZXMuZGF0YS5jb2RlID09IDIwMCkgew0KICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2VzcyhyZXMuZGF0YS5tc2cpOw0KICAgICAgICAgIHRoaXMubG9hZENvbW1lbnRMaXN0KCk7DQogICAgICAgIH0NCiAgICAgIH0pLmNhdGNoKGVyciA9PiB7DQogICAgICAgIGNvbnNvbGUuZXJyb3IoYOivhOiuuuW8guW4uCAtPiBgLCBlcnIpOw0KICAgICAgfSkNCiAgICB9LA0KICAgIG9uRm9jdXMoKSB7DQogICAgICB0aGlzLmlzRm9jdXNlZCA9IHRydWU7DQogICAgfSwNCiAgICAvLyDovpPlhaXmoYblpLHljrvnhKbngrkNCiAgICBvbkJsdXIoKSB7DQogICAgICBpZiAodGhpcy5jb250ZW50ID09PSAnJykgew0KICAgICAgICB0aGlzLmlzRm9jdXNlZCA9IGZhbHNlOw0KICAgICAgICByZXR1cm47DQogICAgICB9DQogICAgICB0aGlzLmlzRm9jdXNlZCA9IHRydWU7DQogICAgfSwNCiAgICBjb21tZW50Q2xpY2soKSB7DQogICAgICBpZiAodGhpcy5jb250ZW50ID09ICcnKSB7DQogICAgICAgIHRoaXMuJHN3YWwuZmlyZSh7DQogICAgICAgICAgdGl0bGU6ICflhoXlrrnmj5DnpLonLA0KICAgICAgICAgIHRleHQ6ICfor4TorrrlhoXlrrnkuLrnqbonLA0KICAgICAgICAgIGljb246ICdzdWNjZXNzJywNCiAgICAgICAgICBzaG93Q29uZmlybUJ1dHRvbjogZmFsc2UsDQogICAgICAgICAgdGltZXI6IDgwMA0KICAgICAgICB9KTsNCiAgICAgICAgcmV0dXJuOw0KICAgICAgfQ0KICAgICAgY29uc3QgZXZhbHVhdGlvbnMgPSB7DQogICAgICAgIGNvbnRlbnRUeXBlOiB0aGlzLmNvbnRlbnRUeXBlLA0KICAgICAgICBjb250ZW50OiB0aGlzLmNvbnRlbnQsDQogICAgICAgIGNvbnRlbnRJZDogdGhpcy5jb250ZW50SWQsDQogICAgICB9DQogICAgICB0aGlzLiRheGlvcy5wb3N0KGBldmFsdWF0aW9ucy9pbnNlcnRgLCBldmFsdWF0aW9ucykudGhlbihyZXMgPT4gew0KICAgICAgICBpZiAocmVzLmRhdGEuY29kZSA9PSAyMDApIHsNCiAgICAgICAgICB0aGlzLmNvbnRlbnQgPSAnJzsNCiAgICAgICAgICB0aGlzLiRzd2FsLmZpcmUoew0KICAgICAgICAgICAgdGl0bGU6ICfor4Torrrmk43kvZwnLA0KICAgICAgICAgICAgdGV4dDogJ+ivhOiuuuaIkOWKnycsDQogICAgICAgICAgICBpY29uOiAnc3VjY2VzcycsDQogICAgICAgICAgICBzaG93Q29uZmlybUJ1dHRvbjogZmFsc2UsDQogICAgICAgICAgICB0aW1lcjogMTEwMA0KICAgICAgICAgIH0pOw0KICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gew0KICAgICAgICAgICAgdGhpcy5sb2FkQ29tbWVudExpc3QoKQ0KICAgICAgICAgIH0sIDExMDApDQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgdGhpcy4kc3dhbC5maXJlKHsNCiAgICAgICAgICAgIHRpdGxlOiAn6K+E6K665byC5bi4JywNCiAgICAgICAgICAgIHRleHQ6IHJlcy5kYXRhLm1zZywNCiAgICAgICAgICAgIGljb246ICdlcnJvcicsDQogICAgICAgICAgICBzaG93Q29uZmlybUJ1dHRvbjogZmFsc2UsDQogICAgICAgICAgICB0aW1lcjogMTEwMA0KICAgICAgICAgIH0pOw0KICAgICAgICB9DQogICAgICB9KS5jYXRjaChlcnIgPT4gew0KICAgICAgICBjb25zb2xlLmVycm9yKGDor4TorrrlvILluLggLT4gYCwgZXJyKTsNCiAgICAgIH0pDQogICAgfSwNCiAgICAvLyDniLbnuqfor4Torrrlm57lpI3ngrnlh7sNCiAgICB0b2dnbGVSZXBseUlucHV0KGNvbW1lbnQpIHsNCiAgICAgIHRoaXMucmVwbHlUZXh0ID0gYOWbnuWkjSR7Y29tbWVudC51c2VyTmFtZX0uLi5gOw0KICAgICAgaWYgKGNvbW1lbnQuc2hvd1JlcGx5SW5wdXQgPT0gbnVsbCkgew0KICAgICAgICBjb21tZW50LnNob3dSZXBseUlucHV0ID0gZmFsc2U7DQogICAgICB9DQogICAgICBjb21tZW50LnNob3dSZXBseUlucHV0ID0gIWNvbW1lbnQuc2hvd1JlcGx5SW5wdXQ7DQogICAgfSwNCiAgICAvLyDlrZDnuqfor4Torrrlm57lpI3ngrnlh7sNCiAgICB0b2dnbGVSZXBseUlucHV0MShjb21tZW50KSB7DQogICAgICBpZiAoY29tbWVudC5yZXBseUlucHV0U3RhdHVzID09IG51bGwpIHsNCiAgICAgICAgY29tbWVudC5yZXBseUlucHV0U3RhdHVzID0gZmFsc2U7DQogICAgICB9DQogICAgICBjb21tZW50LnJlcGx5SW5wdXRTdGF0dXMgPSAhY29tbWVudC5yZXBseUlucHV0U3RhdHVzOw0KICAgIH0sDQogICAgLy8g54i257qn6K+E6K665Zue5aSN5o+Q5LqkDQogICAgc3VibWl0UmVwbHkoY29tbWVudCkgew0KICAgICAgaWYgKHRoaXMucmVwbHlDb250ZW50ID09ICcnKSB7DQogICAgICAgIHRoaXMuJG1lc3NhZ2UoYOivhOiuuuWGheWuueS4jeiDveS4uuepumApOw0KICAgICAgICByZXR1cm47DQogICAgICB9DQogICAgICBjb25zdCBldmFsdWF0aW9uc0RUTyA9IHsNCiAgICAgICAgY29udGVudFR5cGU6IHRoaXMuY29udGVudFR5cGUsDQogICAgICAgIGNvbnRlbnQ6IHRoaXMucmVwbHlDb250ZW50LA0KICAgICAgICBjb250ZW50SWQ6IHRoaXMuY29udGVudElkLA0KICAgICAgICBwYXJlbnRJZDogY29tbWVudC5pZA0KICAgICAgfQ0KICAgICAgdGhpcy4kYXhpb3MucG9zdChgZXZhbHVhdGlvbnMvaW5zZXJ0YCwgZXZhbHVhdGlvbnNEVE8pLnRoZW4ocmVzID0+IHsNCiAgICAgICAgaWYgKHJlcy5kYXRhLmNvZGUgPT0gMjAwKSB7DQogICAgICAgICAgdGhpcy5yZXBseUNvbnRlbnQgPSAnJzsNCiAgICAgICAgICBjb21tZW50LnNob3dSZXBseUlucHV0ID0gZmFsc2U7DQogICAgICAgICAgdGhpcy4kc3dhbC5maXJlKHsNCiAgICAgICAgICAgIHRpdGxlOiAn5Zue5aSN5pON5L2cJywNCiAgICAgICAgICAgIHRleHQ6ICflm57lpI3miJDlip8nLA0KICAgICAgICAgICAgaWNvbjogJ3N1Y2Nlc3MnLA0KICAgICAgICAgICAgc2hvd0NvbmZpcm1CdXR0b246IGZhbHNlLA0KICAgICAgICAgICAgdGltZXI6IDEzMDANCiAgICAgICAgICB9KTsNCiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsNCiAgICAgICAgICAgIC8vIOmHjeaWsOWKoOi9veivhOiuuuWIl+ihqA0KICAgICAgICAgICAgdGhpcy5sb2FkQ29tbWVudExpc3QoKTsNCiAgICAgICAgICB9LCAxMzAwKQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHRoaXMuJHN3YWwuZmlyZSh7DQogICAgICAgICAgICB0aXRsZTogJ+ivhOiuuuW8guW4uCcsDQogICAgICAgICAgICB0ZXh0OiByZXMuZGF0YS5tc2csDQogICAgICAgICAgICBpY29uOiAnZXJyb3InLA0KICAgICAgICAgICAgc2hvd0NvbmZpcm1CdXR0b246IGZhbHNlLA0KICAgICAgICAgICAgdGltZXI6IDExMDANCiAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KICAgICAgfSkuY2F0Y2goZXJyID0+IHsNCiAgICAgICAgY29uc29sZS5lcnJvcihg6K+E6K665byC5bi4IC0+IGAsIGVycik7DQogICAgICB9KQ0KICAgIH0sDQogICAgLy8g5a2Q57qn6K+E6K665Zue5aSN5o+Q5LqkDQogICAgc3VibWl0UmVwbHkxKGNvbW1lbnQpIHsNCiAgICAgIGlmICh0aGlzLnJlcGx5Q2hpbGRDb250ZW50ID09ICcnKSB7DQogICAgICAgIHRoaXMuJG1lc3NhZ2UoYOivhOiuuuWGheWuueS4jeiDveS4uuepumApOw0KICAgICAgICByZXR1cm47DQogICAgICB9DQogICAgICBjb25zdCBldmFsdWF0aW9uc0RUTyA9IHsNCiAgICAgICAgcmVwbGllcklkOiBjb21tZW50LnVzZXJJZCwNCiAgICAgICAgY29udGVudFR5cGU6IHRoaXMuY29udGVudFR5cGUsDQogICAgICAgIGNvbnRlbnQ6IHRoaXMucmVwbHlDaGlsZENvbnRlbnQsDQogICAgICAgIGNvbnRlbnRJZDogdGhpcy5jb250ZW50SWQsDQogICAgICAgIHBhcmVudElkOiBjb21tZW50LnBhcmVudElkDQogICAgICB9DQogICAgICB0aGlzLiRheGlvcy5wb3N0KGBldmFsdWF0aW9ucy9pbnNlcnRgLCBldmFsdWF0aW9uc0RUTykudGhlbihyZXMgPT4gew0KICAgICAgICBpZiAocmVzLmRhdGEuY29kZSA9PSAyMDApIHsNCiAgICAgICAgICB0aGlzLmNvbnRlbnQgPSAnJzsNCiAgICAgICAgICBjb21tZW50LnJlcGx5SW5wdXRTdGF0dXMgPSBmYWxzZTsNCiAgICAgICAgICB0aGlzLiRzd2FsLmZpcmUoew0KICAgICAgICAgICAgdGl0bGU6ICflm57lpI3mk43kvZwnLA0KICAgICAgICAgICAgdGV4dDogJ+WbnuWkjeaIkOWKnycsDQogICAgICAgICAgICBpY29uOiAnc3VjY2VzcycsDQogICAgICAgICAgICBzaG93Q29uZmlybUJ1dHRvbjogZmFsc2UsDQogICAgICAgICAgICB0aW1lcjogMTMwMA0KICAgICAgICAgIH0pOw0KICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gew0KICAgICAgICAgICAgLy8g6YeN5paw5Yqg6L296K+E6K665YiX6KGoDQogICAgICAgICAgICB0aGlzLmxvYWRDb21tZW50TGlzdCgpOw0KICAgICAgICAgIH0sIDEzMDApDQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgdGhpcy4kc3dhbC5maXJlKHsNCiAgICAgICAgICAgIHRpdGxlOiAn6K+E6K665byC5bi4JywNCiAgICAgICAgICAgIHRleHQ6IHJlcy5kYXRhLm1zZywNCiAgICAgICAgICAgIGljb246ICdlcnJvcicsDQogICAgICAgICAgICBzaG93Q29uZmlybUJ1dHRvbjogZmFsc2UsDQogICAgICAgICAgICB0aW1lcjogMTEwMA0KICAgICAgICAgIH0pOw0KICAgICAgICB9DQogICAgICB9KS5jYXRjaChlcnIgPT4gew0KICAgICAgICBjb25zb2xlLmVycm9yKGDor4TorrrlvILluLggLT4gYCwgZXJyKTsNCiAgICAgIH0pDQogICAgfSwNCiAgICBnb0JhY2soKSB7DQogICAgICAvLyDov5Tlm57kuIrkuIDnuqcNCiAgICAgIHRoaXMuJHJvdXRlci5nbygtMSk7DQogICAgfSwNCiAgICAvLyDliqDovb3or4TorrrliJfooagNCiAgICBsb2FkQ29tbWVudExpc3QoKSB7DQogICAgICB0aGlzLiRheGlvcy5nZXQoYGV2YWx1YXRpb25zL2xpc3QvJHt0aGlzLmNvbnRlbnRJZH0vJHt0aGlzLmNvbnRlbnRUeXBlfWApLnRoZW4ocmVzID0+IHsNCiAgICAgICAgaWYgKHJlcy5kYXRhLmNvZGUgPT0gMjAwKSB7DQogICAgICAgICAgdGhpcy5jb21tZW50TGlzdCA9IHJlcy5kYXRhLmRhdGEuZGF0YTsNCiAgICAgICAgICB0aGlzLmV2YWx1YXRpb25zQ291bnQgPSByZXMuZGF0YS5kYXRhLmV2YWx1YXRpb25zQ291bnQ7DQogICAgICAgICAgLy8g54i257qn6K+E6K66DQogICAgICAgICAgdGhpcy5jb21tZW50TGlzdC5mb3JFYWNoKGVudGl0eSA9PiB7DQogICAgICAgICAgICAvLyDml7bpl7TovazmjaINCiAgICAgICAgICAgIGVudGl0eS50aW1lID0gdGltZUFnbyhlbnRpdHkuY3JlYXRlVGltZSk7DQogICAgICAgICAgICAvLyDlrZDnuqfor4TorroNCiAgICAgICAgICAgIGVudGl0eS5jb21tZW50Q2hpbGRWT1MuZm9yRWFjaChlbnRpdHkgPT4gZW50aXR5LnRpbWUgPSB0aW1lQWdvKGVudGl0eS5jcmVhdGVUaW1lKSk7DQogICAgICAgICAgfSk7DQogICAgICAgIH0NCiAgICAgIH0pLmNhdGNoKGVyciA9PiB7DQogICAgICAgIGNvbnNvbGUuZXJyb3IoYOivhOiuuuafpeivouW8guW4uOW8guW4uCAtPiBgLCBlcnIpOw0KICAgICAgfSkNCiAgICB9LA0KICB9DQp9Ow0K"},{"version":3,"sources":["Evaluations.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsLA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Evaluations.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div style=\"width: 100%;\">\r\n    <el-row style=\"margin: 5px 0;\">\r\n      <h2 class=\"commentHeader\">评论&nbsp;{{ evaluationsCount }}</h2>\r\n      <el-row style=\"margin: 15px 0;\">\r\n        <el-col :span=\"2\">\r\n          <el-avatar :src=\"userData.userAvatar\"></el-avatar>\r\n        </el-col>\r\n        <el-col :span=\"22\">\r\n          <div class=\"parent-comment\"\r\n               :style=\"{ backgroundColor: bgColor, height: isFocused ? '120px' : '70px', borderColor: isFocused ? '#007bff' : 'transparent' }\">\r\n                        <textarea class=\"comment-parent-input\" v-model=\"content\" placeholder=\"请友好交流\"\r\n                                  @focus=\"onFocus\"\r\n                                  @blur=\"onBlur\"></textarea>\r\n            <div>\r\n              <span class=\"comment-input-number\">{{ content.length }} / 300</span>\r\n              <el-button\r\n                  :style=\"{ backgroundColor: isFocused ? '#007bff' : '#666', borderColor: isFocused ? '#007bff' : '#666' }\"\r\n                  @click=\"commentClick\" class=\"comment-clike\" size=\"mini\" type=\"primary\">评论\r\n              </el-button>\r\n            </div>\r\n          </div>\r\n        </el-col>\r\n      </el-row>\r\n    </el-row>\r\n    <el-row style=\"margin: 5px 0px;\">\r\n      <el-row v-for=\"(comment, index) in commentList \" :key=\"index\" style=\"padding: 10px 0;\">\r\n        <el-row>\r\n          <el-col :span=\"2\">\r\n            <el-avatar size=\"large\" :src=\"comment.userAvatar\"></el-avatar>\r\n          </el-col>\r\n          <el-col :span=\"22\">\r\n                        <span style=\"height: 40px;line-height: 40px;font-size: 16px;color: #515767;\">{{\r\n                            comment.userName\r\n                          }}</span>\r\n            <span v-if=\"comment.userId == userId\" class=\"my-body-tag\">我自己</span>\r\n          </el-col>\r\n        </el-row>\r\n        <el-row style=\"padding: 8px 0;\">\r\n          <el-col :span=\"22\" :offset=\"2\">\r\n            <span style=\"font-size: 16px;color: #252933;\">{{ comment.content }}</span>\r\n          </el-col>\r\n        </el-row>\r\n        <el-row style=\"padding: 8px 0;\">\r\n          <el-col :span=\"22\" :offset=\"2\">\r\n            <span style=\"font-size: 14px;color: #8A919F;\">{{ comment.time }}</span>\r\n            <el-popconfirm confirm-button-text='好的' cancel-button-text='不删了' icon=\"el-icon-info\"\r\n                           icon-color=\"red\" title=\"删除该条评论？\" v-if=\"comment.userId == userId\"\r\n                           @confirm=\"deleteComment(comment)\">\r\n                            <span slot=\"reference\"\r\n                                  style=\"cursor: pointer;margin-left: 15px;font-size: 14px;color: #8A919F;user-select: none;\">\r\n                                <i class=\"el-icon-delete\"></i>\r\n                                删除\r\n                            </span>\r\n            </el-popconfirm>\r\n            <span @click=\"toggleReplyInput(comment)\"\r\n                  style=\"cursor: pointer;margin-left: 15px;font-size: 14px;color: #8A919F;user-select: none;\">\r\n                            <i class=\"el-icon-chat-dot-round\"></i>\r\n                            回复<span v-if=\"comment.childTotal != 0\">({{ comment.childTotal }})</span>\r\n                        </span>\r\n            <span @click=\"upvote(comment)\"\r\n                  style=\"cursor: pointer;margin-left: 15px;font-size: 14px;color: #8A919F;user-select: none;\">\r\n                            <i class=\"el-icon-discount\" v-if=\"!comment.upvoteFlag\">点赞</i>\r\n                            <i class=\"el-icon-discount\" v-else style=\"color: #1E80FF;\">&nbsp;{{\r\n                                comment.upvoteCount\r\n                              }}</i>\r\n                        </span>\r\n          </el-col>\r\n        </el-row>\r\n        <!-- 父级评论的回复按钮和输入框 -->\r\n        <el-row v-if=\"comment.showReplyInput\" style=\"padding: 10px 0;\">\r\n          <el-col :span=\"22\" :offset=\"2\">\r\n            <div class=\"parent-comment\"\r\n                 :style=\"{ backgroundColor: bgColor, height: '110px', borderColor: '#007bff' }\">\r\n                            <textarea class=\"comment-parent-input\" v-model=\"replyContent\"\r\n                                      :placeholder=\"replyText\"></textarea>\r\n              <div>\r\n                <span class=\"comment-input-number\">{{ replyContent.length }} / 300</span>\r\n                <el-button style=\"background-color: #007bff;user-select: none;\"\r\n                           @click=\"submitReply(comment)\" class=\"comment-clike\" size=\"mini\"\r\n                           type=\"primary\">评论\r\n                </el-button>\r\n              </div>\r\n            </div>\r\n          </el-col>\r\n        </el-row>\r\n        <!-- 子级评论 -->\r\n        <el-row v-for=\"(commentChild, index) in comment.commentChildVOS \" :key=\"index\"\r\n                style=\"padding: 10px 15px;font-size: 16px;\">\r\n          <el-row>\r\n            <el-col :span=\"22\" :offset=\"2\">\r\n              <el-row style=\"display: flex; align-items: center; flex-wrap: wrap;\">\r\n                <el-avatar size=\"small\" :src=\"commentChild.userAvatar\"\r\n                           style=\"margin-right: 5px;\"></el-avatar>\r\n                <span style=\"color: #515767; padding: 0 5px;\">{{ commentChild.userName }}</span>\r\n                <span v-if=\"commentChild.userId == userId\" class=\"my-body-tag\">我自己</span>\r\n                <span v-if=\"commentChild.replierName != null\"\r\n                      style=\"margin:0 15px;color: #1c1c1c;user-select: none;font-size: 12px;\">\r\n                                    回复\r\n                                </span>\r\n                <el-avatar v-if=\"commentChild.replierName != null\" size=\"small\"\r\n                           :src=\"commentChild.replierAvatar\" style=\"margin-right: 5px;\"></el-avatar>\r\n                <span v-if=\"commentChild.replierName != null\" style=\"color: #515767;padding: 0 5px;\">{{\r\n                    commentChild.replierName\r\n                  }}</span>\r\n                <span v-if=\"commentChild.replierId == userId\" class=\"my-body-tag\">我自己</span>\r\n                <span\r\n                    style=\"letter-spacing: 1px;font-size: 16px; color: #252933; white-space: normal; margin-left: 5px;padding: 6px 0;\">\r\n                                    : {{ commentChild.content }}\r\n                                </span>\r\n              </el-row>\r\n              <el-row style=\"padding: 10px 0;\">\r\n                <span style=\"font-size: 14px;color: #8A919F;\">{{ commentChild.time }}</span>\r\n                <el-popconfirm confirm-button-text='好的' cancel-button-text='不删了' icon=\"el-icon-info\"\r\n                               icon-color=\"red\" title=\"删除该条评论？\" v-if=\"commentChild.userId == userId\"\r\n                               @confirm=\"deleteComment(commentChild)\">\r\n                                    <span slot=\"reference\"\r\n                                          style=\"cursor: pointer;margin-left: 15px;font-size: 14px;color: #8A919F;user-select: none;\">\r\n                                        <i class=\"el-icon-delete\"></i>\r\n                                        删除\r\n                                    </span>\r\n                </el-popconfirm>\r\n                <span @click=\"toggleReplyInput1(commentChild)\"\r\n                      style=\"cursor: pointer;margin-left: 15px;font-size: 14px;color: #8A919F;user-select: none;\">\r\n                                    <i class=\"el-icon-chat-dot-round\"></i>\r\n                                    回复\r\n                                </span>\r\n                <span @click=\"upvote(commentChild)\"\r\n                      style=\"cursor: pointer;margin-left: 15px;font-size: 14px;color: #8A919F;user-select: none;\">\r\n                                    <i class=\"el-icon-discount\" v-if=\"!commentChild.upvoteFlag\">点赞</i>\r\n                                    <i class=\"el-icon-discount\" v-else style=\"color: #1E80FF;\">&nbsp;{{\r\n                                        commentChild.upvoteCount\r\n                                      }}</i>\r\n                                </span>\r\n              </el-row>\r\n              <!-- 子级评论的回复按钮和输入框 -->\r\n              <el-row v-if=\"commentChild.replyInputStatus\" style=\"padding: 10px 0;\">\r\n                <el-col :span=\"24\">\r\n                  <div class=\"parent-comment\"\r\n                       :style=\"{ backgroundColor: bgColor, height: '110px', borderColor: '#007bff' }\">\r\n                                        <textarea class=\"comment-parent-input\" v-model=\"replyChildContent\"\r\n                                                  :placeholder=\"replyText\"></textarea>\r\n                    <div>\r\n                                            <span class=\"comment-input-number\">{{ replyChildContent.length }} /\r\n                                                300</span>\r\n                      <el-button style=\"background-color: #007bff;\"\r\n                                 @click=\"submitReply1(commentChild)\" class=\"comment-clike\" size=\"mini\"\r\n                                 type=\"primary\">评论\r\n                      </el-button>\r\n                    </div>\r\n                  </div>\r\n                </el-col>\r\n              </el-row>\r\n            </el-col>\r\n          </el-row>\r\n        </el-row>\r\n      </el-row>\r\n    </el-row>\r\n    <!-- 举报反馈对话框 -->\r\n    <el-dialog style=\"user-select: none;border-radius: 5px;\" title=\"我要举报\" :visible.sync=\"dialogVisibleReport\"\r\n               width=\"30%\">\r\n      <el-row v-for=\"(item, index) in reports\" :key=\"index\" style=\"margin-top: 10px;\">\r\n        <el-row style=\"padding-bottom: 10px;user-select: none;\">*{{ item.name }}</el-row>\r\n        <el-row>\r\n                    <span v-for=\"(itemChild, indexChild) in item.list\" :key=\"indexChild\"\r\n                          @click=\"reportItemClick(itemChild)\">\r\n                        <button :style=\"{ border: itemChild.isSelected ? '1px solid #4b87bc' : '1px solid #f4f4f4' }\"\r\n                                class=\"reportItem\">\r\n                            {{ itemChild.name }}\r\n                        </button>\r\n                    </span>\r\n        </el-row>\r\n      </el-row>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n                <button class=\"cannel-btn\" @click=\"dialogVisibleReport = false\">取消</button>\r\n                <button class=\"yes-btn\" @click=\"operationReport\">确定举报</button>\r\n            </span>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {timeAgo} from '@/utils/data'\r\n\r\nexport default {\r\n  props: {\r\n    contentId: {\r\n      type: Number,\r\n      default: ''\r\n    },\r\n    contentType: {\r\n      type: String,\r\n      default: ''\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      userData: {},\r\n      noteData: {},\r\n      commentContent: '',\r\n      content: '',\r\n      commentList: [],\r\n      replyContent: '',\r\n      id: null,\r\n      isFocused: false,\r\n      bgColor: 'rgb(245 245 245)',\r\n      strLength: '0/300',\r\n      replyText: '',\r\n      userId: '',\r\n      dialogVisibleReport: false,\r\n      reports: [],\r\n      selectdStatus: false,\r\n      evaluationsCount: 0,\r\n      comment: {},\r\n      replyChildContent: '',\r\n    };\r\n  },\r\n  watch: {\r\n    contentId(newVal, oldVal) {\r\n      if (newVal !== oldVal) {\r\n        this.loadCommentList();\r\n      }\r\n    },\r\n    content() {\r\n      if (this.content === '') {\r\n        this.isFocused = false;\r\n        return;\r\n      }\r\n    },\r\n  },\r\n  created() {\r\n    this.getUserInfo();\r\n    this.loadCommentList();\r\n  },\r\n  methods: {\r\n    getUserInfo() {\r\n      const userInfo = sessionStorage.getItem(\"userInfo\");\r\n      this.userData = JSON.parse(userInfo);\r\n      this.userId = this.userData.id;\r\n    },\r\n    // 点赞 或 取消点赞\r\n    upvote(comment) {\r\n      let upvoteList = comment.upvoteList ? comment.upvoteList.split(',') : [];\r\n      if (upvoteList.length) {\r\n        // 界面反映\r\n        if (comment.upvoteFlag) {\r\n          // 取消点赞\r\n          let index = upvoteList.indexOf(this.userData.id.toString());\r\n          if (index !== -1) {\r\n            upvoteList.splice(index, 1); // 移除用户ID\r\n          }\r\n        } else {\r\n          // 点赞\r\n          if (!upvoteList.includes(this.userData.userId.toString())) {\r\n            upvoteList.push(this.userData.userId.toString()); // 添加用户ID\r\n          }\r\n        }\r\n      }\r\n      let evalustions = {\r\n        id: comment.id,\r\n        upvoteList: upvoteList.length ? upvoteList.join(',') : this.userData.id\r\n      }\r\n      this.$axios.put(`evaluations/update`, evalustions).then(res => {\r\n        if (res.data.code == 200) {\r\n          comment.upvoteList = upvoteList.join(','); // 更新upvoteList字符串\r\n          comment.upvoteFlag = !comment.upvoteFlag; // 切换点赞状态标志\r\n          comment.upvoteCount += 1;\r\n        }\r\n      }).catch(err => {\r\n        console.error(`点赞状态设置异常 -> `, err);\r\n      })\r\n    },\r\n    // 确定举报\r\n    operationReport() {\r\n      let reportItem = [];\r\n      this.reports.forEach(entity => {\r\n        let entityReport = entity.list.filter(child => child.isSelected);\r\n        if (entityReport.length != 0) {\r\n          reportItem = entityReport;\r\n        }\r\n      });\r\n      if (!reportItem.length) {\r\n        this.$message(`请选中举报项`);\r\n        return;\r\n      }\r\n      this.$axios.get(`evaluations-reports/report/${this.comment.id}/${reportItem[0].name}`).then(res => {\r\n        this.dialogVisibleReport = false;\r\n        if (res.data.code == 200) {\r\n          this.$swal.fire({\r\n            title: '举报操作',\r\n            text: '举报成功',\r\n            icon: 'success',\r\n            showConfirmButton: false,\r\n            timer: 1100\r\n          });\r\n        } else {\r\n          this.$swal.fire({\r\n            title: '举报操作',\r\n            text: res.data.msg,\r\n            icon: 'error',\r\n            showConfirmButton: false,\r\n            timer: 1100\r\n          });\r\n        }\r\n      }).catch(err => {\r\n        console.error(`评论举报异常 -> `, err);\r\n      })\r\n    },\r\n    // 选中举报项\r\n    reportItemClick(itemChild) {\r\n      this.reports.forEach(entity => {\r\n        entity.list.forEach(child => {\r\n          child.isSelected = false;\r\n        })\r\n      })\r\n      itemChild.isSelected = true;\r\n    },\r\n    reportList() {\r\n      this.$axios.get(`evaluations/reportList`).then(res => {\r\n        if (res.data.code == 200) {\r\n          this.reports = [];\r\n          res.data.data.forEach(entity => {\r\n            let report = {name: entity.name};\r\n            let resportList = [];\r\n            entity.list.forEach(listItem => {\r\n              let reportChild = {};\r\n              reportChild.name = listItem;\r\n              reportChild.isSelected = false;\r\n              resportList.push(reportChild);\r\n            })\r\n            report.list = resportList;\r\n            this.reports.push(report);\r\n          })\r\n        }\r\n      }).catch(err => {\r\n        console.error(`举报项加载失败 -> `, err);\r\n      })\r\n    },\r\n    reportComment(comment) {\r\n      this.reportList();\r\n      this.dialogVisibleReport = true;\r\n      this.comment = comment;\r\n    },\r\n    deleteComment(comment) { // 删除评论\r\n      this.$axios.delete(`evaluations/delete/${comment.id}`).then(res => {\r\n        if (res.data.code == 200) {\r\n          this.$message.success(res.data.msg);\r\n          this.loadCommentList();\r\n        }\r\n      }).catch(err => {\r\n        console.error(`评论异常 -> `, err);\r\n      })\r\n    },\r\n    onFocus() {\r\n      this.isFocused = true;\r\n    },\r\n    // 输入框失去焦点\r\n    onBlur() {\r\n      if (this.content === '') {\r\n        this.isFocused = false;\r\n        return;\r\n      }\r\n      this.isFocused = true;\r\n    },\r\n    commentClick() {\r\n      if (this.content == '') {\r\n        this.$swal.fire({\r\n          title: '内容提示',\r\n          text: '评论内容为空',\r\n          icon: 'success',\r\n          showConfirmButton: false,\r\n          timer: 800\r\n        });\r\n        return;\r\n      }\r\n      const evaluations = {\r\n        contentType: this.contentType,\r\n        content: this.content,\r\n        contentId: this.contentId,\r\n      }\r\n      this.$axios.post(`evaluations/insert`, evaluations).then(res => {\r\n        if (res.data.code == 200) {\r\n          this.content = '';\r\n          this.$swal.fire({\r\n            title: '评论操作',\r\n            text: '评论成功',\r\n            icon: 'success',\r\n            showConfirmButton: false,\r\n            timer: 1100\r\n          });\r\n          setTimeout(() => {\r\n            this.loadCommentList()\r\n          }, 1100)\r\n        } else {\r\n          this.$swal.fire({\r\n            title: '评论异常',\r\n            text: res.data.msg,\r\n            icon: 'error',\r\n            showConfirmButton: false,\r\n            timer: 1100\r\n          });\r\n        }\r\n      }).catch(err => {\r\n        console.error(`评论异常 -> `, err);\r\n      })\r\n    },\r\n    // 父级评论回复点击\r\n    toggleReplyInput(comment) {\r\n      this.replyText = `回复${comment.userName}...`;\r\n      if (comment.showReplyInput == null) {\r\n        comment.showReplyInput = false;\r\n      }\r\n      comment.showReplyInput = !comment.showReplyInput;\r\n    },\r\n    // 子级评论回复点击\r\n    toggleReplyInput1(comment) {\r\n      if (comment.replyInputStatus == null) {\r\n        comment.replyInputStatus = false;\r\n      }\r\n      comment.replyInputStatus = !comment.replyInputStatus;\r\n    },\r\n    // 父级评论回复提交\r\n    submitReply(comment) {\r\n      if (this.replyContent == '') {\r\n        this.$message(`评论内容不能为空`);\r\n        return;\r\n      }\r\n      const evaluationsDTO = {\r\n        contentType: this.contentType,\r\n        content: this.replyContent,\r\n        contentId: this.contentId,\r\n        parentId: comment.id\r\n      }\r\n      this.$axios.post(`evaluations/insert`, evaluationsDTO).then(res => {\r\n        if (res.data.code == 200) {\r\n          this.replyContent = '';\r\n          comment.showReplyInput = false;\r\n          this.$swal.fire({\r\n            title: '回复操作',\r\n            text: '回复成功',\r\n            icon: 'success',\r\n            showConfirmButton: false,\r\n            timer: 1300\r\n          });\r\n          setTimeout(() => {\r\n            // 重新加载评论列表\r\n            this.loadCommentList();\r\n          }, 1300)\r\n        } else {\r\n          this.$swal.fire({\r\n            title: '评论异常',\r\n            text: res.data.msg,\r\n            icon: 'error',\r\n            showConfirmButton: false,\r\n            timer: 1100\r\n          });\r\n        }\r\n      }).catch(err => {\r\n        console.error(`评论异常 -> `, err);\r\n      })\r\n    },\r\n    // 子级评论回复提交\r\n    submitReply1(comment) {\r\n      if (this.replyChildContent == '') {\r\n        this.$message(`评论内容不能为空`);\r\n        return;\r\n      }\r\n      const evaluationsDTO = {\r\n        replierId: comment.userId,\r\n        contentType: this.contentType,\r\n        content: this.replyChildContent,\r\n        contentId: this.contentId,\r\n        parentId: comment.parentId\r\n      }\r\n      this.$axios.post(`evaluations/insert`, evaluationsDTO).then(res => {\r\n        if (res.data.code == 200) {\r\n          this.content = '';\r\n          comment.replyInputStatus = false;\r\n          this.$swal.fire({\r\n            title: '回复操作',\r\n            text: '回复成功',\r\n            icon: 'success',\r\n            showConfirmButton: false,\r\n            timer: 1300\r\n          });\r\n          setTimeout(() => {\r\n            // 重新加载评论列表\r\n            this.loadCommentList();\r\n          }, 1300)\r\n        } else {\r\n          this.$swal.fire({\r\n            title: '评论异常',\r\n            text: res.data.msg,\r\n            icon: 'error',\r\n            showConfirmButton: false,\r\n            timer: 1100\r\n          });\r\n        }\r\n      }).catch(err => {\r\n        console.error(`评论异常 -> `, err);\r\n      })\r\n    },\r\n    goBack() {\r\n      // 返回上一级\r\n      this.$router.go(-1);\r\n    },\r\n    // 加载评论列表\r\n    loadCommentList() {\r\n      this.$axios.get(`evaluations/list/${this.contentId}/${this.contentType}`).then(res => {\r\n        if (res.data.code == 200) {\r\n          this.commentList = res.data.data.data;\r\n          this.evaluationsCount = res.data.data.evaluationsCount;\r\n          // 父级评论\r\n          this.commentList.forEach(entity => {\r\n            // 时间转换\r\n            entity.time = timeAgo(entity.createTime);\r\n            // 子级评论\r\n            entity.commentChildVOS.forEach(entity => entity.time = timeAgo(entity.createTime));\r\n          });\r\n        }\r\n      }).catch(err => {\r\n        console.error(`评论查询异常异常 -> `, err);\r\n      })\r\n    },\r\n  }\r\n};\r\n</script>\r\n<style lang=\"scss\">\r\n.cannel-btn,\r\n.yes-btn {\r\n  padding: 0px 15px 5px 15px;\r\n  font-size: 14px !important;\r\n  margin: 0 10px;\r\n  border-radius: 3px;\r\n  border: none;\r\n}\r\n\r\n.cannel-btn {\r\n  color: #1c1c1c;\r\n}\r\n\r\n.yes-btn {\r\n  background-color: #4b87bc;\r\n  color: #EAF2FF;\r\n}\r\n\r\n.cannel-btn:hover {\r\n  background-color: #f5f5f5;\r\n}\r\n\r\n.yes-btn:hover {\r\n  background-color: #66a8e1;\r\n}\r\n\r\n.commentHeader {\r\n  color: #252933;\r\n  font-size: 18px;\r\n  font-weight: 600;\r\n  line-height: 30px;\r\n}\r\n\r\n.comment-parent-input {\r\n  outline: none;\r\n  border: none;\r\n  background-color: rgb(245 245 245);\r\n  font-size: 16px;\r\n  padding: 6px;\r\n  width: 100%;\r\n  min-height: 60px;\r\n  overflow: auto;\r\n  resize: vertical;\r\n  user-select: none;\r\n  margin: 0 0 20px 0;\r\n  display: block;\r\n}\r\n\r\n.parent-comment {\r\n  padding: 6px 12px;\r\n  border-radius: 3px;\r\n  transition: height 0.3s ease, border-color 0.3s ease;\r\n  border: 1px solid transparent;\r\n  user-select: none;\r\n  position: relative;\r\n}\r\n\r\n.comment-input-number {\r\n  position: absolute;\r\n  left: 10px;\r\n  bottom: 5px;\r\n  padding: 0 6px;\r\n  font-size: 12px;\r\n  color: #666;\r\n}\r\n\r\n.comment-clike {\r\n  position: absolute;\r\n  right: 10px;\r\n  bottom: 5px;\r\n}\r\n\r\n.my-body-tag {\r\n  font-size: 12px;\r\n  padding: 3px 4px;\r\n  color: #1E80FF;\r\n  background-color: #EAF2FF;\r\n  margin-left: 5px;\r\n}\r\n\r\n.reportItem {\r\n  display: inline-block;\r\n  padding: 8px 22px;\r\n  background-color: #f4f4f4;\r\n  border: 1px solid #f4f4f4;\r\n  margin: 5px 3px 5px 0;\r\n  border-radius: 3px;\r\n  cursor: pointer;\r\n  user-select: none;\r\n}\r\n\r\n.reportItem:hover {\r\n  border: 1px solid #4b87bc;\r\n  color: #4b87bc;\r\n}\r\n</style>"]}]}