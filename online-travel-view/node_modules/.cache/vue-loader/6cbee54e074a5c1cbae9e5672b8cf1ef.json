{"remainingRequest":"F:\\Java\\Code\\online-travel-view\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\Java\\Code\\online-travel-view\\src\\views\\user\\Bed.vue?vue&type=style&index=0&id=603c57b7&scoped=true&lang=scss&","dependencies":[{"path":"F:\\Java\\Code\\online-travel-view\\src\\views\\user\\Bed.vue","mtime":1744472593081},{"path":"F:\\Java\\Code\\online-travel-view\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\Java\\Code\\online-travel-view\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"F:\\Java\\Code\\online-travel-view\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"F:\\Java\\Code\\online-travel-view\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\Java\\Code\\online-travel-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\Java\\Code\\online-travel-view\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCi5iZWQtaXRlbSB7DQogIGJhY2tncm91bmQtY29sb3I6IHJnYigyNDgsIDI0OCwgMjQ4KTsNCiAgcGFkZGluZzogMTBweDsNCiAgYm9yZGVyLXJhZGl1czogNXB4Ow0KICBtYXJnaW4tYm90dG9tOiA0cHg7DQp9DQo="},{"version":3,"sources":["Bed.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+JA;AACA;AACA;AACA;AACA;AACA","file":"Bed.vue","sourceRoot":"src/views/user","sourcesContent":["<template>\r\n  <div>\r\n    <div v-if=\"bedOperaion\" style=\"padding: 20px;\">\r\n      <div>\r\n        <span class=\"dialog-hover\">床位号</span>\r\n        <input class=\"dialog-input\" v-model=\"data.number\" placeholder=\"输入\" />\r\n        <el-row style=\"margin: 20px 0;\">\r\n          <div>\r\n            <span class=\"dialog-hover\">床位状态</span>\r\n          </div>\r\n          <el-switch active-color=\"#13ce66\" inactive-color=\"#ff4949\" v-model=\"data.status\" active-text=\"可用\"\r\n                     inactive-text=\"不可用\">\r\n          </el-switch>\r\n        </el-row>\r\n      </div>\r\n      <div style=\"display: flex;justify-content: center;align-items: center;\">\r\n        <el-button size=\"small\" v-if=\"!isOperation\"\r\n                   style=\"background-color: rgb(96, 98, 102);color: rgb(247,248,249);border: none;\" class=\"customer\"\r\n                   type=\"info\" @click=\"addOperation()\">新增</el-button>\r\n        <el-button size=\"small\" v-else\r\n                   style=\"background-color: rgb(96, 98, 102);color: rgb(247,248,249);border: none;\" class=\"customer\"\r\n                   type=\"info\" @click=\"updateOperation()\">修改</el-button>\r\n      </div>\r\n    </div>\r\n    <div style=\"display: flex;justify-content: center;align-items: center;margin: 10px;\">\r\n      <el-button style=\"width: 100%;\" v-if=\"beds.length !== 0\" size=\"mini\" type=\"info\"\r\n                 @click=\"createBed\">创建床位信息</el-button>\r\n    </div>\r\n\r\n    <div v-if=\"beds.length === 0\">\r\n      <el-empty>\r\n        <el-button type=\"info\" @click=\"createBed\">创建床位信息</el-button>\r\n      </el-empty>\r\n    </div>\r\n    <div v-else style=\"padding: 10px;\">\r\n      <div class=\"bed-item\" v-for=\"(bed, index) in beds\" :key=\"index\">\r\n        <div style=\"font-size: 18px;\">\r\n                    <span style=\"margin-right: 5px;\">\r\n                        <i class=\"el-icon-table-lamp\"></i>\r\n                        床位号：{{ bed.number }}\r\n                    </span>\r\n          <span>{{ bed.status ? '状态可用' : '状态不可用' }}</span>\r\n        </div>\r\n        <div style=\"margin: 8px 6px;font-size: 12px;\">\r\n          创建时间：{{ bed.createTime }}\r\n        </div>\r\n        <div>\r\n          <el-button style=\"margin-right: 10px;\" @click=\"updateBedInfo(bed)\" size=\"mini\" type=\"primary\"\r\n                     icon=\"el-icon-edit\" circle></el-button>\r\n          <el-popconfirm title=\"确定删除床位信息？\" @confirm=\"deleteBed(bed)\">\r\n            <el-button slot=\"reference\" size=\"mini\" type=\"danger\" icon=\"el-icon-delete\" circle></el-button>\r\n          </el-popconfirm>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  props: {\r\n    roomId: {\r\n      type: Number,\r\n      default: ''\r\n    },\r\n  },\r\n  watch: {\r\n    roomId(v1, v2) {\r\n      console.log(\"房间ID：\" ,v1);\r\n      this.fetchBeds(v1);\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      data: {},\r\n      beds: [],\r\n      bedOperaion: false, // 控制床位新增/编辑的开关变量\r\n      isOperation: false, // false: 新增；true： 修改\r\n    }\r\n  },\r\n  created() {\r\n    this.fetchBeds();\r\n  },\r\n  methods: {\r\n    async deleteBed(bed) {\r\n      let ids = [bed.id]\r\n      const response = await this.$axios.post(`/hotelRoomBed/batchDelete`, ids);\r\n      if (response.data.code === 200) {\r\n        this.cannel();\r\n        this.fetchBeds();\r\n        return;\r\n      }\r\n    },\r\n    createBed() {\r\n      this.data = {};\r\n      this.bedOperaion = true;\r\n    },\r\n    updateBedInfo(bed) {\r\n      this.data = bed;\r\n      this.bedOperaion = true;\r\n      this.isOperation = true;\r\n    },\r\n    // 床位新增\r\n    addOperation() {\r\n      const hotelRoomBed = {\r\n        roomId: this.roomId,\r\n        ...this.data\r\n      }\r\n      this.$axios.post('/hotelRoomBed/save', hotelRoomBed).then(res => {\r\n        if (res.data.code === 200) {\r\n          // 关闭操作区域\r\n          this.bedOperaion = false;\r\n          this.$message.success('床位新增成功');\r\n          this.fetchBeds();\r\n        }\r\n      }).catch(error => {\r\n        console.error(\"查询床位信息异常:\", error);\r\n\r\n      })\r\n    },\r\n    // 床位修改\r\n    updateOperation() {\r\n      this.$axios.put('/hotelRoomBed/update', this.data).then(res => {\r\n        if (res.data.code === 200) {\r\n          // 关闭操作区域\r\n          this.bedOperaion = false;\r\n          this.isOperation = false;\r\n          this.$message.success('床位修改成功');\r\n          this.fetchBeds();\r\n        }\r\n      }).catch(error => {\r\n        console.error(\"查询床位信息异常:\", error);\r\n\r\n      })\r\n    },\r\n    // 取消事件\r\n    cannel() {\r\n      this.data = {};\r\n      this.bedOperaion = false;\r\n      this.isOperation = false;\r\n    },\r\n    // 加载对应的床位信息\r\n    fetchBeds() {\r\n      const hotelRoomBedQueryDto = {\r\n        roomId: this.roomId\r\n      }\r\n      this.$axios.post('/hotelRoomBed/query', hotelRoomBedQueryDto).then(res => {\r\n        if (res.data.code === 200) {\r\n          this.beds = res.data.data;\r\n        }\r\n      }).catch(error => {\r\n        console.error(\"查询床位信息异常:\", error);\r\n\r\n      })\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style scoped lang=\"scss\">\r\n.bed-item {\r\n  background-color: rgb(248, 248, 248);\r\n  padding: 10px;\r\n  border-radius: 5px;\r\n  margin-bottom: 4px;\r\n}\r\n</style>"]}]}